(function(){Object.fire({uri:"axoid://define/webclient.Application",properties:["title","plugins:Plugins"],doc:window.document,domNode:window.document.body,methods:function(t){return{init:function(){var e,n,i,r,o;for(t.init.call(this),r=this.domNode.querySelectorAll("[data-widget]"),o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(Object.dom.initWidget({domNode:e}));return o},titleChanged:function(t){return this.doc.title=t}}}})}).call(this),function(){Object.fire({uri:"axoid://define/Cache/CodeLoader",uriPattern:"remote://*/js/{{host}}.js?_ver={{version}}",methods:function(){return{fetchUnmarshaller:function(t){return t},cacheSerializer:function(t){return this.evaluate(t)},cacheDeserializer:function(t){return this.evaluate(t)},evaluate:function(t){var e;if(!t)return null;try{Function.call(Function,t)()}catch(n){e=n,this.error(e,"JS syntax:"+e.message).log()}return t}}}})}.call(this),function(){Object.fire({uri:"axoid://define/CodeLoader/EntityLoader",methods:function(t){return{resolveUri:function(e){return e.host=e.host.replace(/\./g,"/"),t.resolveUri.call(this,e)}}}})}.call(this),function(){Object.fire({uri:"axoid://define/ScriptService/EntityService",scriptType:"text/javascript",methods:function(t){return{resolveUri:function(e,n){return e.path=("js/"+e.host.replace(/\./g,"/")+".js").split("/"),e.host="",t.resolveUri.call(this,e,n)}}}})}.call(this),function(){Object.fire({uri:"axoid://define/webclient.HashNavigator",properties:["value:Values"],methods:function(t){var e,n;return e=window.location,n=function(t){var e,n,i,r,o,s;if(t&&"#"!==t||(t="#!"),r={page:""},"!"===t[1])for(n=t.slice(2).split("/"),r.page=n[0],i=o=0,s=n.length;s>o;i=++o)e=n[i],i>0&&(r["index"+(i-1||"")]=e||"");return r},{init:function(){return this.value=n(e.hash),t.init.call(this),window.onhashchange=function(t){return function(){return t.prop("value",n(e.hash))}}(this)},valueChanged:function(t){var n,i,r;if(t){for(i=[],n=t.page,r=0;n;)i.push(n),n=t["index"+(r||"")],r++;return(i="#!"+i.join("/"))!==e.hash?e.hash=i:void 0}}}}})}.call(this),function(){Object.fire({uri:"axoid://define/Cache/HtmlLoader",uriPattern:"remote://*/html/{{host}}.html",methods:function(t){return{init:function(){return this.storage=this.createStorage(),t.init.call(this)},createStorage:function(){return this.storage||{getItem:function(t){return this[t]},setItem:function(t,e){return this[t]=e}}},cacheDeserializer:function(t){return t},cacheSerializer:function(t){return t}}}})}.call(this),function(){Object.fire({uri:"axoid://define/EventHandler/HttpService",defaultHost:window.location.hostname+(window.location.port?":"+window.location.port:""),defaultProtocol:window.location.protocol.slice(0,-1),methods:function(){var t,e,n,i,r;return t=function(t){return t},e={json:"application/json",js:"application/json",html:"text/html",txt:"text/plain"},i=window.XMLHttpRequest||function(){try{return window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}(),n={js:Object.parse,json:Object.parse,uri:Object.parseUri},r=function(){return new i},{negotiateResultType:function(t){var e,n,i;return i=t.path.slice(-1)[0],n="js",i&&(e=i.lastIndexOf("."))>-1&&(n=i.slice(e+1)),n},negotiateError:function(t,e,n){return!t||t>=200&&300>t||304===t?null:Object.error("remote: "+t+" "+n.uri+" "+(e||"")).addDetails(null!=n?n._err:void 0)},resolveMethod:function(t){return t.method||(t.payload?"POST":"GET")},resolveUri:function(t,e){return"*"===t.host&&(t.host=this.defaultHost),t.type=t.params._ssl||e.ssl?"https":this.defaultProtocol,t.params.ssl&&delete t.params._ssl,""+t},onRequestReady:function(e,i){var r,o;return r=this.negotiateError(e.status,e.statusText,i),o=(i.unmarshaller||n[i.dataType]||t)(e.responseText),i.callback(r,o)},resolveHeaders:function(t){return Object.update({Accept:e[t.dataType]||"*/*",Language:String.LANGUAGE,"Content-Type":e[t.dataType]},t.headers)},onEvent:function(e){var n,i,o,s,a,u,c;try{n=this,a=r(),a.open(this.resolveMethod(e),this.resolveUri(e.uri,e),!0),e._err=new Error,e.dataType||(e.dataType=this.negotiateResultType(e.uri,e)),a.onreadystatechange=function(){return 4!==this.readyState||e.completed||(e.completed=!0,this.onreadystatechange=t,n.onRequestReady(this,e)),!1},c=this.resolveHeaders(e);for(o in c)u=c[o],u&&a.setRequestHeader(o,u);(s=e.uri.params.responseType)&&(a.responseType=s),e.payload?("object"==typeof e.payload&&(e.payload=JSON.stringify(e.payload)),a.send(e.payload)):a.send(null)}catch(l){i=l,e.callback(this.error("remote_error: "+e.uri,i))}}}}}),Object.fire({uri:"axoid://define/HttpService/RawHttpService",methods:function(){return{onEvent:function(t){var e,n,i,r,o,s;try{e=this,o=new XMLHttpRequest,t._err=new Error,o.open(this.resolveMethod(t),this.resolveUri(t.uri,t),!0),o.onreadystatechange=function(){var n,i;return 4!==this.readyState||t.completed||(t.completed=!0,this.onreadystatechange=function(t){return t},n=function(){var t,e,n,r;if(this.response){for(n=new Uint8Array(this.response),r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(String.fromCharCode(i));return r}return[]}.call(this),t.callback(e.negotiateError(this.status,this.statusText,t),n.join(""))),!1},r=Object.update({Language:String.LANGUAGE},t.headers);for(i in r)s=r[i],s&&o.setRequestHeader(i,s);o.responseType="arraybuffer",o.send(null)}catch(a){n=a,t.callback(this.error("remote_error: "+t.uri,n))}}}}})}.call(this),function(){var t=[].slice;!function(e){return Object.fire({uri:"axoid://define/EventHandler/IndexedDatabase",properties:["touch","sync"],version:1,methods:function(n){var i,r,o,s,a,u,c,l,d,h;return h=function(e){var n,i,r,o;return n=e.descend||"desc"===e.dir,(r=e.range)?r instanceof Array?(i=r[0],o=r[1],null===o?[this.IDBKeyRange.lowerBound(i)]:null===i?[this.IDBKeyRange.upperBound(o)]:(n=i>o)?[this.IDBKeyRange.apply(this,t.call([o,i]).concat([this.PREV]))]:[this.IDBKeyRange.apply(this,t.call([i,o]).concat([this.NEXT]))]):[this.IDBKeyRange.only(r)]:[null,n?PREV:NEXT]},d=function(t,e){var n,i,r;if(r=e.id)return t.get(r);for(i in t.indexNames)if(n=t.index(i),r=e[n.keyPath])return n.get(r);return null},l=function(){var t,e;return e=function(t){return t.keyPath?t:{keyPath:t}},t=function(t,n,i){var r,o,s,a;for(null==n&&(n="id"),null==i&&(i=[]),r=this.createObjectStore(t,e(n)),a=[],o=0,s=i.length;s>o;o++)n=i[o],(n=e(n))&&a.push(r.createIndex(String.camelize(n.keyPath,","),n.keyPath,n.options));return a},function(e){var n,i,r,o,s,a,u,c,l,d;for(this.log("Upgrade",e.oldVersion," => ",e.newVersion),n=e.target.result,c=n.objectStoreNames,o=0,a=c.length;a>o;o++)i=c[o],n.deleteObjectStore(i);if(!this.scheme)throw new Error("No scheme for db "+this.id);for(l=this.scheme,d=[],s=0,u=l.length;u>s;s++)r=l[s],(r=r.id?r:{id:r})&&d.push(t.call(n,r.id,r.keyPath,r.indices));return d}}(),r=function(){var t,n;return n=this.home,t=n.dbOpen(),t.onsuccess=function(t){return function(e){var i,r,o,s,a;return i=e.target.result,o="query"===(a=t.operation)||"read"===a?"readonly":"readwrite",s=5e3,(r=i.transaction(t.scope||[t.storeId],o,s))?(r.oncomplete=function(){return i.close()},r.onerror=function(){return n.error("db: couldn't not connect",e),i.close()},r.onblocked=function(){return n.error("db: connection blocked",e),i.close()},r.onabort=function(){return n.error("db: connection aborted",e),i.close()},r.ontimeout=function(){return n.error("db: transaction timeout.",e),i.close()},t.next(null,t.tx=r)):t.next("no-tx")}}(this),t.onerror=function(){return n.error("db: couldn't not connect")},t.onupgradeneeded=function(t){var i;return null!=(i=e.localStorage)&&(i[n.id+"LastSync"]=0),l.call(n,t)}},u=function(){var t;try{return this.store=this.tx.objectStore(this.storeId),this.next()}catch(e){return t=e,this.callback(this.home.error("db","can't obtain the store "+this.storeId,t))}},i=function(t,e,n){var i,r,o,s,a,u;return null==e&&(e={}),o=e.key,u=o?t.index(String.camelize(o,",")):t,(i=u.openCursor.apply(u,h(e)))?(i.onerror=function(t){return n(Object.error("failed","cursor error",t))},r=[],a=0,s=0,i.onsuccess=function(t){return(i=t.target.result)?(e.limit&&s>=e.limit?n(null,r):e.offset&&e.offset>a?(a++,i["continue"]()):(r.push(i.value),s++,i["continue"]()),0):n(null,r)},0):n("No cursor")},c=function(t,e){var n,i,r;return e?t?this.next(t):(r=this.options.key?this.store.index(String.camelize(this.options.key,",")):this.store,(n=r.openCursor.apply(r,h(this.options)))?(i=[],n.onsuccess=function(t){return function(r){var o;return(n=r.target.result)?(o=n.value,o&&o.parent===e.id?(o.parentObj=e,i.push(o),n["continue"]()):n["continue"]()):t.next(null,i)}}(this)):this.next("no_cursor")):this.next("parent_not_specified")},o=function(){var t;return(t=d(this.store,this.options))?(t.onsuccess=function(t){return function(e){var n,i;return(n=e.target.result)||(i="not_found"),t.next(i,n)}}(this),t.onerror=function(){return cb("not_found")},0):this.next("not_specified")},a=[function(){var t,e;return t=[].concat(this.payload),(e=function(n){return function(){var i,r;return(i=t.shift())?(i.id||(i.id=i._id||Object.math.uuid()),i.ts=Date.now().valueOf(),r=i.deleted?store["delete"](i.id):n.store.put(i),r.onsuccess=e,r.onerror=n.next):n.next()}}(this))()},function(){return this.home.prop("touch",Date.now()),this.next()}],s={query:function(){return i(this.store,this.options,this.next)},tree:[o,c],find:o,field:[o,function(t,e){return this.next(t,null!=e?e[this.options.field]:void 0)}],insert:a,update:a,upsert:a,remove:function(){var t;return t=store["delete"](this.payload[0].id),t.oncomplete=this.next,t.onerror=function(t){return function(){return t.next("Not Deleted")}}(this)},clear:function(){var t;return t=store.clear(),t.oncomplete=this.next,t.onerror=function(t){return function(){return t.next("Not cleared")}}(this)},sync:function(){var t;return(t=this.prop("syncDeltaUri"))?this.prop("syncDeltaUri",t):void 0}},{init:function(){var t,i,r;return this.IDB=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.msIndexedDB,this.IDBKeyRange=e.IDBKeyRange||e.webkitIDBKeyRange,this.IDBCursor=e.IDBCursor||e.webkitIDBCursor||e.mozIDBCursor||e.msIDBCursor,this.PREV=(null!=(t=this.IDBCursor)?t.PREV:void 0)||"prev",this.NEXT=(null!=(i=this.IDBCursor)?i.NEXT:void 0)||"next",this.prop("lastSynchedTimestamp",null!=(r=e.localStorage)?r[this.id+"LastSync"]:void 0),n.init.call(this),this.socketChannel?Object.entity.create({id:this.id+"Socket:SocketClient",channel:this.socketChannel}):void 0},onEvent:function(t,e){return null==e&&(e=t.uri),t.home=this,t.storeId=e.path[0].toLowerCase(),t.operation=e.host,t.payload=t.docs||[t.doc],t.options=Object.update(e.params,t.options),Function.perform(t,function(t){return this.next=t.next,[r,u].concat(s[this.operation],this.callback)})},dbOpen:function(){return this.IDB.open(this.id,this.version)},syncChanged:function(t){return t?Function.perform(this,function(e){return[function(){var n,i;for(i in t)n=t[i],(i=i.split("_")[0])&&Object.fire({uri:"db://upsert/"+i,docs:n,callback:e.wait()});return e.next()},function(){return this.prop("lastSynchedTimestamp",this._newSyncTs)}]}):this._newSyncTs=Date.now()},lastSynchedTimestampChanged:function(t){var n,i;return null!=(i=e.localStorage)&&i.setItem(this.id+"LastSync",t),this.syncPeriod?(n=function(e){return function(){return e.prop("lastSynchedTimestampByPeriod",t)}}(this),e.setTimeout(n,this.syncPeriod)):this.prop("lastSynchedTimestampOnce")?void 0:this.prop("lastSynchedTimestampOnce",t)}}}})}(this)}.call(this),function(){Object.fire({uri:"axoid://define/HttpService/ScriptService",scriptType:"text/javascript",methods:function(){var t,e,n,i;return e=window._JSONP||(window._JSONP={}),t=window._JSONP_COUNTER||(window._JSONP_COUNTER=1),i=window.document,n=function(t){var e;return e=i.createElement("script"),e.type=this.scriptType,e.charset="utf-8",Object.update(e,t),e},{onEvent:function(i,r){var o,s,a;return null==r&&(r=i.uri),s=n.call(this,i.scriptAttrs),i.noAsynMode||(s.async="async"),i.scriptId&&(s.id=i.scriptId),i._err=new Error,(o=r.params.jsonp)?(a="n"+t++,r.params[o]=escape("window._JSONP."+a),e[a]=function(t){return"function"==typeof i.callback?i.callback(null,i.unmarshaller?i.unmarshaller(t):t):void 0},s.onload=function(){return s.parentNode.removeChild(s),delete e[a]}):s.onload=function(){var t;return t=i.callback,i.callback=null,"function"==typeof t?t(null,this):void 0},s.onerror=function(){return i.callback(Object.error("remote_error","Script error: "+r))},s.src=this.resolveUri(r,i),Object.dom.appendToHead(s)}}}})}.call(this),function(){Object.fire({uri:"axoid://define/Settings",properties:["value:Values"],storage:window.localStorage,methods:function(t){return{init:function(){return this.storage=this.createStorage(),this.initValue(this.id),t.init.call(this)},createStorage:function(){return this.storage||{getItem:function(t){return this[t]},setItem:function(t,e){return this[t]=e}}},initValue:function(t){var e;return this.value=(e=this.storage.getItem(t))&&Object.parse(e)||this.value||{}},valueChanged:function(e){return this.persistValue(e),t.valueChanged.apply(this,arguments)},persistValue:function(t){var e;try{if(this.storage.getItem(this.id)!==(e=JSON.stringify(t)))return this.storage.setItem(this.id,e)}catch(n){}}}}})}.call(this),function(){Object.fire({uri:"axoid://define/SocketClient",properties:["requires:Requires"],ready:!1,methods:function(t){return{launch:function(e){return this.requires=["script://"+this.channel+"/socket.io.js"],t.launch.call(this,e)},init:function(){var t,e;if(!(t=window.io))throw new Error("No Socket IO");return e=t.connect(this.channel),e.on("connect",function(t){return function(){return t.onConnect()}}(this)),e.on("message",function(t){return function(e){return t.onMessage(e)}}(this)),e.on("disconnect",function(t){return function(){return t.onDisconnect()}}(this)),this.emit=function(t,n){return null==n&&(n=t.callback),t.uri=""+t.uri,delete t.callback,e.json.emit("message",t,n)}},onEvent:function(t){return this.log("send",t),this.emit(t)},onConnect:function(e){return this.log("onConnect",e),t.init.call(this)},onDisconnect:function(t){return this.log("onDisconnect",t)},onMessage:function(t){return this.log("onMessage",t),t.uri?Object.fire(t):void 0}}}})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};Object.LOG_LEVEL=1,Object.log=function(t){var e;return null==t&&(t={log:function(){}}),t.log.apply||(t._log=t.log,t.log=function(){var e;return t._log(function(){var t,n,i;for(i=[],t=0,n=arguments.length;n>t;t++)e=arguments[t],i.push(e);return i}.apply(this,arguments).join(", "))}),t.error||(t.error=function(){var e;return t.log.apply(t,["ERROR: "].concat(function(){var t,n,i;for(i=[],t=0,n=arguments.length;n>t;t++)e=arguments[t],i.push(e);return i}.apply(this,arguments)))}),e=function(e){var n;return Object.LOG_LEVEL>4?((null!=e?e.printIntoLog:void 0)?e.printIntoLog(t):t.log.apply(t,function(){var t,e,i;for(i=[],t=0,e=arguments.length;e>t;t++)n=arguments[t],i.push(n);return i}.apply(this,arguments)),e):e},e.error=e,e}(window.console),Object.error=function(){var t;return t=function(){function t(t){this.details=[],"string"==typeof t?(t&&(this.reason=t.split(":")[0]),t&&(this.message=t)):(t.reason&&(this.reason=t.reason),t.message&&(this.message=t.message))}return t.prototype.reason="unknown",t.prototype.message="",t.prototype.isError=!0,t.prototype.addDetails=function(){var t,e,n;for(e=0,n=arguments.length;n>e;e++)t=arguments[e],t&&(this.details.unshift(t),t.stack&&(this.stack=t.stack));return this},t.prototype.addPrefix=function(t){return t&&(this.prefix=""+t),this},t.prototype.log=function(){return Object.log(this),this},t.prototype.end=function(t){return t},t.prototype.toString=function(){return(this.prefix||"")+" "+this.message},t.prototype.printIntoLog=function(t){var e,n;return e=("function"==typeof this.details?this.details(1===length):void 0)?this.details[0]:this.details,n=this.stack||(new Error).stack,t.error(this.toString(),e,n)},t}(),function(e,n){return((null!=e?e.isError:void 0)?e:new t(e)).addDetails(n)}}(),Object.dom=function(e){var n,i,r,o;return o=e.document,r=function(t){var n,i;if(i={},n=void 0,e.event)i.internal=e.event,i.target=n=e.event.srcElement;else{for(i.internal=t,n=t.target;n&&1!==n.nodeType;)n=n.parentNode;i.target=n}for(;n&&!n.entity;)n=n.parentNode;return i.entity=n&&n.entity,i},n=["mousedown","mouseup","click","mousemove","mouseover","mouseout"],i=function(t){var e,n,i;if(e=this,!e.disabled)switch(n=r(t),i=n.internal.type){case"mousedown":e.stylePressed&&e.updateClass(e.stylePressed),e.touchBegin&&e.touchBegin(n);break;case"mouseup":e.touchEnd&&e.touchEnd(n),e.stylePressed&&e.updateClass("!"+e.stylePressed);break;case"click":e.tapped&&e.tapped(n);break;case"mousemove":e.mouseMove&&e.mouseMove(n);break;case"mouseover":e.styleHovered&&e.updateClass(e.styleHovered),e.mouseOver&&e.mouseOver(n);break;case"mouseout":e.mouseOut&&e.mouseOut(n),e.styleHovered&&e.updateClass("!"+e.styleHovered)}return!0},{document:e.document,createEvent:r,STYLE_LINE_FIXED:"overflow:hidden;white-space:nowrap;cursor:pointer;",STYLE_TEXTLINE:"white-space:nowrap;line-height:1.5em;vertical-align:middle;",createElement:function(t,e){return null==t&&(t="DIV"),Object.update(o.createElement(t),e)},createComplexElement:function(t,e){var n,i;return n=this.DOM_FACTORY||(this.DOM_FACTORY=o.createElement("div")),n.innerHTML=t,i=n.firstChild,n.removeChild(i),Object.update(i,e)},appendToHead:function(t){var e;return e=o.getElementsByTagName("head")[0],e.appendChild(t)},appendCss:function(t){return this.appendToHead(this.createElement("link",{rel:"stylesheet",href:t}))},getElementById:function(t){return o.getElementById(t)||null},removeElement:function(t){var e;return null!=t&&null!=(e=t.parentNode)?e.removeChild(t):void 0},alive:function(t){return this.listenEvents(t,n,function(e){return i.call(t,e)})},listenTapped:function(t){return this.listenEvents(t,["click"],function(e){return i.call(t,e)})},listenEvents:function(t,e,n,i){var r,s,a,u;for(s=t?t.domNode:o,r=e.split?e.split(" "):e,a=0,u=r.length;u>a;a++)e=r[a],s.addEventListener?s.addEventListener(e,n,i):s.attachEvent("on"+e,n,i);return s},stopEvent:function(t){return(t=(null!=t?t.internal:void 0)||t)&&("function"==typeof t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1),!1},isKeyboardCode:function(t,n){return null==t&&(t=e.event||{}),t.keyCode===n||t.charCode===n||t.which===n},KEY_CODE:{ESCAPE:27,ENTER:13,TAB:8},viewportSize:function(){var t;return t=e.screen,{width:t.availWidth,height:t.availHeight}},getTotalOffset:function(t){var e;for(e={top:0,left:0,width:t.clientWidth,height:t.clientHeight};t;)e.top+=t.offsetTop-t.scrollTop,e.left+=t.offsetLeft-t.scrollLeft,t=t.offsetParent;return e},getDataset:function(t){var e,n,i,r,o,s;if(n=t.dataset)return n;for(n={},s=t.attributes,r=0,o=s.length;o>r;r++)e=s[r],"data-"===(i=e.name).slice(0,5)&&(n[String.camelize(i.slice(5),"-")]=t.getAttribute(i));return n},handleError:function(t){return Object.error(t).log()},updateClass:function(e,n){var i,r,o,s,a;if(!e||!n)return e;for(r=e.className.split(" "),n=n.split(" "),s=0,a=n.length;a>s;s++)i=n[s],i&&("!"===i[0]?"!*"===i?r=[]:(o=r.indexOf(i.slice(1)))>-1&&(r[o]=""):t.call(r,i)<0&&r.push(i));return e.className=function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)i=r[t],i&&n.push(i);return n}().join(" "),e},initWidget:function(){return function(t){var e,n,i,r,o,s,a,u;e=t.domNode,a=Object.dom.getDataset(e);for(r in a)s=a[r],t[r]=s;return u=t.widget.split(":"),n=u[0],o=u[1],o||(o=n,n=null),(i=e.getAttribute("id"))&&(n=i),t.uri="axoid://create/"+o+"#"+(n||""),Object.fire(t)}}()}}("object"==typeof window?window:this)}.call(this),function(){Object.fire({uri:"axoid://define/View/webclient.AceEditor",properties:["value"],css:"position: relative;height: 500px;",mode:"coffee",theme:"chrome",methods:function(t){return{init:function(){return t.init.call(this),this.editor.getSession().on("change",function(t){return function(){return t.defered?void 0:(t.defered=!0,Function.nextTick(1e3,t,function(){return this.defered=!1,this.isOnChange=!0,this.prop("value",this.editor.getValue()),this.isOnChange=!1}))}}(this))},domNodeChanged:function(t){return this.editor=window.ace.edit(t),this.editor.setTheme("ace/theme/"+this.theme),this.editor.getSession().setMode("ace/mode/"+this.mode)},valueChanged:function(t){return this.isOnChange?void 0:this.editor.setValue(t)}}}})}.call(this),function(){Object.fire({uri:"axoid://define/View/Button",properties:["disabled:Disabled","caption:Caption","counter"],domNodeTag:"button",busyCaption:"in_progress",methods:function(){return{tapped:function(t){var e;return this.prop("disabled",!0),(t=this.createAsyncEvent())?(this.domNodeClass("ui-busy"),this.busyCaption&&(this.savedCaption=null!=(e=this.getCaptionElt())?e.domNode.innerHTML:void 0,this.prop("caption",this.busyCaption)),Object.fire(Object.clone(t,{callback:function(e){return function(n,i){var r;return"function"==typeof t.callback&&t.callback(n,i),n?e.onError(n):(e.incrementCounter(),e.onSuccess()),e.domNodeClass("!ui-busy"),e.prop("disabled",!1),e.savedCaption?(null!=(r=e.getCaptionElt())&&(r.domNode.innerHTML=e.savedCaption),e.savedCaption=null):void 0}}(this)}))):(this.doAction()&&this.incrementCounter(),Function.nextTick(function(t){return function(){return t.prop("disabled",!1)}}(this)))},createAsyncEvent:function(){return null},doAction:function(){return!0},incrementCounter:function(){return this.prop("counter",(this.prop("counter")||0)+1)},counterChanged:function(){return this.prop("odd",(this.prop("counter")||0)%2===1)},onError:function(){},onSuccess:function(){}}}})}.call(this),function(){Object.fire({uri:"axoid://define/List/D3List",properties:["delta"],methods:function(){var t;return t=function(t,e,n){var i,r,o,s;if(null==n&&(n={}),t)for(o=0,s=t.length;s>o;o++)i=t[o],(r=i[e])&&(n[r]=i);return n},{dataChanged:function(e,n){var i;return e?(this.dataRegistry=t(e,this.dataIdKey),this.childrenRegistry={},this.setChildren(e,{noReset:!0}),(i=this.getValue())&&!this.dataRegistry[i]?this.prop("value",null):void 0):void this.prop("dataCount",n.error?-2:-1)},deltaChanged:function(e){return this.dataRegistry=Object.update(this.dataRegistry||{},t(e,this.dataIdKey)),this.childrenRegistry||(this.childrenRegistry={}),this.setChildren(e,{noReset:!0})},childrenAdapter:function(t){var e,n,i,r,o,s,a,u,c,l,d,h,f,p,m,g;if(h=[],n=this._children,this._children=[],i=0,n)for(f=0,m=n.length;m>f;f++)o=n[f],(u=o.value)&&(this.dataRegistry[u]?(this._children.push(o),this.childrenRegistry[u]=o,i++):o.done());if(t)for(a=p=0,g=t.length;g>p;a=++p){if(r=t[a],!(u=r[this.dataIdKey]))throw new Error("Empty datum id in list data");(s=this.childrenRegistry[u])?(c=s.domNode,this.updateChild(s,r)):(i++,l=this.childrenItemAdapter(r,a),e={},l.id&&(e.id=l.id),d=Object.dom.createElement(l.domNodeTag,Object.update(e,l.domNodeAttrs)),this.contentNode.insertBefore(d,null!=c?c.nextSibling:void 0),l.domNode=d,h.push(l))}return this.prop("dataCount",i),h},updateChild:function(t,e){return t.prop("data",e,{force:!0})}}}})}.call(this),function(){Object.fire({uri:"axoid://define/Input/Dropdown",properties:["data"],dataIdKey:"id",methods:function(t){var e;return e=function(t,e,n){return null==e&&(e=""+t),null==n&&(n=!1),new Option(e,t,n,n)},{getInputChildrenMeta:function(){var t;return t=this,[{id:this.id+"_input:View",onInited:function(){return t.valueElt=this},domNodeTag:"select",style:this.valueStyle,domNodeAttrs:{onchange:this.create_onchange_handler()}}]},tapped:function(){var t;return null!=(t=this.valueElt)?t.domNode.focus():void 0},create_onchange_handler:function(){var t;return t=this,function(){return t.doneEditor(this.selectedIndex?t.data[this.selectedIndex-1][t.dataIdKey]:""),!0}},dataChanged:function(n,i){var r,o,s,a,u,c,l;if(t.dataChanged.call(this,n,i),u=this.valueElt.domNode.options,u.length=0,null===n)u[0]=e("","Loading...");else for(u[0]=e("","",!this.value),o=c=0,l=n.length;l>c;o=++c)r=n[o],(s=r[this.dataIdKey])&&(a=s===this.value,this.valueElt.domNode.options[o+1]=e(s,r.name,a),a&&this.prop("datum",r));return i},redrawValue:function(){var t,e,n,i,r,o;if(this.data)for(o=this.data,e=i=0,r=o.length;r>i;e=++i)if(t=o[e],(n=t[this.dataIdKey])===this.value)return this.prop("datum",t),void(this.valueElt.domNode.selectedIndex=e+1);return this.valueElt.domNode.selectedIndex=0}}}})}.call(this),function(){Object.fire({uri:"axoid://define/View/List",properties:["children:Children","itemTemplate","data","selection","value:Value"],style:"list-group",domNodeTag:"ul",itemType:"Widget",itemStyle:"list-group-item",itemTemplate:'<a href="#" onclick="return false;">{{name}}</a>',dataIdKey:"id",itemDomNodeTag:"li",asyncDataPropertyName:null,itemActiveStyle:"active",methods:function(){var t;return t=function(t,e,n){var i,r,o,s;if(null==n&&(n={}),t)for(o=0,s=t.length;s>o;o++)i=t[o],(r=i[e])&&(n[r]=i);return n},{valueChanged:function(t){var e;return this.prop("datum",null!=(e=this.dataRegistry)?e[t]:void 0),this.syncSelection()},itemTemplateChanged:function(t){var e,n,i,r;if(t){i=this.childrenRegistry,r=[];for(n in i)e=i[n],r.push(e.prop("template",t));return r}},childrenChanged:function(){return this.childrenRegistry=t(this.getChildren(),"value"),this.syncSelection()},dataChanged:function(e,n){var i;return e?this.prop("dataCount",e.length):(this.prop("dataCount",n.error?-2:-1),e=[]),this.dataRegistry=t(e,this.dataIdKey),this.childrenRegistry={},this.setChildren(e),this.dataCount>=0&&(i=this.getValue())&&!this.dataRegistry[i]?this.prop("value",null):void 0},syncSelection:function(){var t;return this.prop("selection",null!=(t=this.childrenRegistry)?t[this.getValue()]:void 0)},selectionChanged:function(t,e){var n;return null!=(n=e.oldValue)&&n.domNodeClass("!"+this.itemActiveStyle),null!=t?t.domNodeClass(this.itemActiveStyle):void 0},childrenAdapter:function(t){var e,n,i,r,o;if(!t)return[];for(o=[],n=i=0,r=t.length;r>i;n=++i)e=t[n],o.push(this.childrenItemAdapter(e,n));return o},childrenItemAdapter:function(t){return{type:this.itemType,domNodeTag:this.itemDomNodeTag,style:this.itemStyle,template:this.itemTemplate,value:t[this.dataIdKey],data:t}},tapped:function(t){var e,n,i;for(n=t.entity;n&&n!==this;){if((e=n.value)&&(null!=(i=this.childrenRegistry)?i[e]:void 0)){this.setValue(e);break}n=n.parentView}return n}}}})}.call(this),function(){Object.emit({uri:"axoid://define/Html/Widget",properties:["data","template"],methods:function(t){var e;return e=function(){var t,e,n,i;if(this._subs)for(i=this._subs,e=0,n=i.length;n>e;e++)t=i[e],t.done();return this._subs=[]},{done:function(){return e.call(this),t.done.call(this)},htmlChanged:function(){var t,n,i,r,o;for(e.call(this),r=this.domNode.querySelectorAll("[data-widget]"),o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push(Object.dom.initWidget({domNode:t,callback:function(t){return function(e,n){return e?t.handleSubError(e,meta):t._subs.push(n)}}(this)}));return o},templateChanged:function(){return this.redraw()},dataChanged:function(){return this.redraw()},redraw:function(){var t,e;return(e=this.prop("template"))&&(t=this.prop("data"))?this.prop("html",this.compileHtml(e,t)):void 0},compileHtml:function(t,e){return String.template(t,e)},handleSubError:function(t,e){return Object.error(t("wrong_widget",e)).log(),Object.emit({uri:"axoid://create/Html",domNode:e.domNode,style:"alert-error",html:"Error: "+(t.message||"can't create UI view: "+e.id)})}}}})}.call(this),function(){Object.emit({uri:"axoid://define/Property/Node",methods:function(){return{init:function(t,e){var n;if(!(n=e.domNode))throw new Error("domNode is not specified for ["+t+"]");return t.domNode=t.contentNode=n,n.entity=t,t.css&&(n.style.cssText+=t.css),e.styleExpression&&Object.property.bind(t,"style",e.styleExpression),t.domNodeClass((e.style||"")+" "+(n.className||"")+" "+(n.disabled?"disabled":"")),(e.hidden||e.hiddenExpression)&&(n.style.display="none"),t.tapped&&Object.dom.listenTapped(t),t.propertyChanged({entity:t,propId:"domNode",value:n})},done:function(t){var e;return(e=t.domNode)?(Object.dom.removeElement(e),e.entity=null,t.domNode=t.contentNode=null):void 0}}}}),Object.emit({uri:"axoid://define/Property/Style",methods:function(){return{init:function(){},getter:function(t){return t.domNode.className},setter:function(t,e){return"string"==typeof e?t.domNodeClass(e):t.domNodeStyle(e)}}},mixin:function(){return{domNodeStyle:function(t){var e,n,i;if(!(n=this.domNode.style)||!t)return n;for(e in t)i=t[e],n[e]!==i&&(n[e]=i);return n},domNodeClass:function(t){return Object.dom.updateClass(this.domNode,t)},toggleDomNodeClass:function(t,e){return Object.dom.updateClass(this.domNode,e?t:"!"+t)}}}}),Object.emit({uri:"axoid://define/Property/Hidden",methods:function(){return{getter:function(t){return"none"===t.domNode.style.display},setter:function(t,e){return t.domNode.style.display=e?"none":this.displayType||""}}},mixin:function(){return{display:function(t,e){var n;if(this.setHidden(!t),t&&e&&(n=this))for(;n=n.parentView;)n.display(t);return this},switchDisplay:function(){return this.setHidden(!this.isHidden())},isHidden:function(){return this.prop("hidden")},setHidden:function(t){return this.prop("hidden",t)}}}}),Object.emit({uri:"axoid://define/Property/Caption",methods:function(){return{setter:function(t,e,n){var i,r,o;if(null==e&&(e=""),t[this.id]=e,i=t.getCaptionElt(),o="none"===e,i){i.display(!(i.hidden||o)),e=t.getCaptionHtml(e,n);try{return i.domNode.innerHTML=o||!e?"":e}catch(s){return r=s,t.error(r,"Caption")}}},comparator:function(){return!1}}},mixin:function(){return{getCaptionElt:function(){return this.isDone?null:this.captionElt||this},getCaptionHtml:function(t,e){var n;return((n=this.prop("icon"))?'<i class="icon-#{icon}"></i> ':"")+String.localize(t,e.quantity)}}}}),Object.emit({uri:"axoid://define/Property/Html",methods:function(t){return{setValueAsync:function(e,n,i){return this.setter(e,e.asyncPlaceholder||null,n),t.setAsyncValue.call(this,e,n,i)},getter:function(t){var e;return null!=(e=t.contentNode)?e.innerHTML:void 0},setter:function(t,e){var n,i;null==e&&(e="<div>&nbsp;</div>");try{if(null!=e?e.error:void 0)throw e.error;return t.contentNode.innerHTML=e}catch(r){return n=r,i=String.localize("html_error")+": "+n.message,t.contentNode.innerHTML="<div style='color:red;'>"+i+"</div>"}}}}}),Object.emit({uri:"axoid://define/Property/Disabled",methods:function(){return{setter:function(t,e){return t[this.id]=!!e},comparator:function(t,e){return!t==!e}}},mixin:function(t){return{init:function(){return t.init.call(this),Object.dom.alive(this)},disabledChanged:function(t){return this.domNode.disabled=t?"disabled":"",this.toggleDomNodeClass("disabled",t)}}}}),Object.emit({uri:"axoid://define/Property/Children",methods:function(t){var e;return e=function(t,e){var n,i;return t.domNode||(n={},t.id&&(n.id=t.id),i=Object.dom.createElement(t.domNodeTag,Object.update(n,t.domNodeAttrs)),t.domNode=i),t.domNode.parentNode||this.contentNode.appendChild(t.domNode),Object.emit(Object.update({type:"Box",uri:"axoid://create",callback:e},t))},{createAsyncValueCallback:function(t){return function(e){return function(n,i){return t._done?void 0:(t.domNodeClass("!ui-busy"),t.prop(e.id,t.childrenAsyncAdapter(n,i)))}}(this)},setValueForUri:function(t,e){return t.domNodeClass("ui-busy"),Object.emit({uri:e,callback:this.createAsyncValueCallback(t)})},setValue:function(t,n,i){var r;return r=Object.update({value:n},i),Function.perform(t,function(t){return[function(){var n,i,o,s,a,u;if(o=this.childrenAdapter(r.value,r),r.noReset||this.removeAllChildren(),n=this.getChildren(),s=function(i){return function(r){var o,s;return s=n.length,n.push(null),o=t.wait(),e.call(i,r,function(t,e){return n[s]=e,o(t,e)})}}(this),o)for(a=0,u=o.length;u>a;a++)i=o[a],i&&s.call(this,i);return t.next()},function(){var t,e,n;return n=function(){var n,i,r;for(r=[],e=n=0,i=arguments.length;i>n;e=++n)t=arguments[e],e>1&&r.push(t);return r}.apply(this,arguments),this.childrenChanged(n,{value:n})}]}),r.uri?this.setValueForUri(t,r.uri):void 0},done:function(e){return e.removeAllChildren(),t.done.call(this,e)}}},mixin:function(){return{createChild:function(t,e){return _child.call(this,t,function(t){return function(n,i){var r;
return r=t.getChildren(),r.push(i),"function"==typeof t.childrenChanged&&t.childrenChanged(r,{value:r}),"function"==typeof e?e(n,i):void 0}}(this))},childrenAdapter:function(t){return t},childrenChanged:function(t,e){return e},getChildren:function(){return this._children||(this._children=[])},removeAllChildren:function(){var t,e,n,i;if(this._children)for(i=this._children,e=0,n=i.length;n>e;e++)t=i[e],t&&t.done();return this._children=[]},setChildren:function(t,e){return this.prop("children",t,e)},childrenAsyncAdapter:function(t,e){return t?{id:"Html",html:String.localize(t.reason||"unknown_error")}:e}}}}),Object.emit({uri:"axoid://define/View",properties:["domNode:Node","style:Style","hidden:Hidden"]}),Object.emit({uri:"axoid://define/View/Html",properties:["html:Html"]}),Object.emit({uri:"axoid://define/View/Label",properties:["caption:Caption"],domNodeTag:"span"}),Object.emit({uri:"axoid://define/View/Box",properties:["children:Children"]})}.call(this),function(){Object.fire({uri:"axoid://define/Box/Field",properties:["caption:Caption","value:Value","disabled:Disabled","hint"],children:[],caption:"",style:"form-group",valueBoxStyle:"form-input-container",valueStyle:"form-control",captionStyle:"control-label",methods:function(t){return{init:function(){var e;return this.caption=this.caption||(null!=(e=this.id)?e.split(".")[-1]:void 0),t.init.call(this)},childrenAdapter:function(t){var e;return e=this,(null!=t?t.length:void 0)||(t=[{type:"View",onInited:function(){return e.valueElt=this},style:this.valueStyle,tapped:function(t){return e.doFocus(t)}}]),[{type:"Label",onInited:function(){return e.captionElt=this},domNode:Object.dom.createComplexElement(String.format('<label class="{0}" for="{1}_input"/>',this.captionStyle,this.id))},{type:"Box",style:this.valueBoxStyle,children:t}]},launchEditor:function(){},doFocus:function(t){return this.launchEditor(t)},isEditable:function(){return!this.readOnly},valueChanged:function(){return this.redrawValue()},redrawValue:function(){return this.valueElt&&(this.valueElt.domNode.innerHTML=this.getCValue()),this.domNodeClass("!error")},doneEditor:function(t){return t!==this.getValue()?this.setValue(t):void 0},addValidationRule:function(t){this.rules=(this.rules||[]).concat(t)},checkIfValid:function(){var t,e,n,i,r,o,s,a,u,c;if(e={stack:[]},this.isValueRequired()&&this.isEmptyValue()&&e.stack.push({reason:"empty_required_field",message:String.localize("empty_required_field",String.localize(this.caption||this.id))}),rules)for(u=this.rules,r=0,s=u.length;s>r;r++)n=u[r],n.call(this,e);if(i=!e.stack.length,!i)for(c=e.stack,o=0,a=c.length;a>o;o++)t=c[o],t.entity=this;return this.toggleDomNodeClass("error",!i),e},isValueRequired:function(){return this.valueRequired},getCValue:function(){return this.getValue()},getCaptionHtml:function(t){return String.localize(t||this.id)+(this.valueRequired?' <span class="required">*</span>':"")},disabledChanged:function(e){return t.disabledChanged.apply(this,arguments),Object.prop(this,"valueElt.domNode.disabled",e)},hintChanged:function(t){var e;return null!=(e=this.hintElt)?e.prop("caption",t):void 0}}}}),Object.fire({uri:"axoid://define/Field/Input",alive:!0,maxLength:128,inputTag:"input",inputType:"text",methods:function(t){return{childrenAdapter:function(e){return e=this.getInputChildrenMeta(),t.childrenAdapter.call(this,e)},getInputChildrenMeta:function(){var t;return t=this,[{id:this.id+"_input:View",domNode:this.create_inputNode(),style:this.valueStyle,onInited:function(){return t.valueElt=this}}]},create_inputNode:function(){var t;return t=this.create_onblur_handler(),Object.dom.createComplexElement(String.format('<{0} type="{1}" name="{2}" maxLength="{3}"/>',this.inputTag,this.inputType,this.id,this.maxLength),Object.update({placeholder:String.localize(this.placeholder),onblur:t,onfocusleave:t,onkeydown:this.create_onkeydown_handler()},this.inputNodeAttrs))},create_onblur_handler:function(){var t;return t=this,function(){return t.doneEditor(this.value),!0}},create_onkeydown_handler:function(){var t;return t=this,function(e){return e=e||window.event,13===e.keyCode&&t.doneEditor(this.value),!0}},redrawValue:function(){var t;return null!=(t=this.valueElt)&&(t.domNode.value=this.getValue()),this.domNodeClass("!ui-error")},tapped:function(){var t;return null!=(t=this.valueElt)?t.domNode.focus():void 0},hintChanged:function(t){var e;return null!=(e=this.valueElt)?e.domNode.placeholder=t:void 0}}}}),Object.fire({uri:"axoid://define/Input/Textarea",inputTag:"textarea",maxLength:8192}),Object.fire({uri:"axoid://define/Input/PasswordInput",inputType:"password"}),Object.fire({uri:"axoid://define/Input/DateInput",inputType:"date"}),Object.fire({uri:"axoid://define/Field/Checkbox",captionStyle:"checkbox",methods:function(){return{childrenAdapter:function(){var t,e;return t=this,e=function(){return t.doneEditor(!!this.checked),!0},[{type:"Box",style:this.valueBoxStyle,children:[{type:"View",onInited:function(){return t.valueElt=this},domNodeTag:"input",style:this.valueStyle1,domNodeAttrs:{onchange:e,type:"checkbox",value:!0,disabled:this.disabled,checked:!!this.getValue()}},{type:"View",onInited:function(){return t.captionElt=this},domNodeTag:"span",css:"display:inline;padding-left:8px"}]}]}}},redrawValue:function(){this.valueElt&&(this.valueElt.domNode.checked=!!this.getValue())}}),Object.fire({uri:"axoid://define/Box/Fieldset",domNodeTag:"fieldset",methods:function(){return{childrenAdapter:function(t){return t.unshift({id:this.id+"_label:Label",domNodeTag:"legend",style:this.captionStyle,caption:this.caption}),t}}}})}.call(this),function(){Object.fire({uri:"axoid://define/Property/SubmitSupport",mixin:function(){var t;return t=/~/g,{validateFields:function(){var t,e,n,i,r,o,s,a;if(t={stack:[]},r=!0,this.fields){for(a=this.fields,o=0,s=a.length;s>o;o++)n=a[o],e=Object.entity.get(n).checkIfValid(),e.stack.length&&t.stack.push.apply(t.stack,e.stack);(r=!t.stack.length)||((i=t.stack[0].entity.valueElt)&&i.domNode.focus(),this.error(t))}return r},fieldsValues:function(){var e,n,i,r,o,s,a,u;if(n={},this.fields)for(a=this.fields,i=0,o=a.length;o>i;i++)e=a[i],Object.prop(n,e.replace(t,"."),Object.entity.get(e).getValue());if(this.inputs)for(u=this.inputs,r=0,s=u.length;s>r;r++)e=u[r],Object.prop(n,e.replace(t,"."),window.document.getElementById(e).value);return n},getFields:function(){var t,e,n,i,r;if(e={},this.fields)for(r=this.fields,n=0,i=r.length;i>n;n++)t=r[n],e[t]=Object.entity.get(t);return e},create_onload_handler:function(){var t;return t=this,function(){var e,n,i,r,o;if(t.frameElt&&(i=t.frameElt.domNode,e=i.contentDocument,o=i.contentWindow||e.window||i,"about:blank"!==o.location.href))return n=null,r=Object.parse(e.body.innerText||e.body.textContent||e.body.innerHTML),r||(r={errors:[{reason:"server_error"}]}),r.errors&&r.errors.length&&(n={stack:r.errors}),t.onResult(n,r)}},onResult:function(t,e){return t?this.error(t):this.success(e)},error:function(t){return Object.dom.handleError(t,this)},success:function(t){return t}}}}),Object.fire({uri:"axoid://define/Button/AsyncButton",properties:["support:SubmitSupport"],busyCaption:"in_progress",methods:function(){return{createAsyncDoc:function(){return this.fieldsValues()},async:function(){return this.validateFields()&&this.createAsyncEvent()},createAsyncEvent:function(){return{uri:this.asyncUrl,doc:this.createAsyncDoc(),callback:this.createAsyncCallback()}},createAsyncCallback:function(){return this.onResult}}}}),Object.fire({uri:"axoid://define/Box/Form",properties:["disabled:Disabled","support:SubmitSupport","value:Values"],domNodeTag:"form",domNodeAttrs:{onsubmit:function(){return!1}},submit:function(){return this.domNode.submit()}}),Object.fire({uri:"axoid://define/Form/SubmitForm",enctype:"application/x-www-form-urlencoded",method:"post",action:"#",methods:function(t){return{init:function(){var e,n;return e=this,n=this.id,this.domNode||(this.domNode=Object.dom.createComplexElement(String.format('<form enctype="{0}" method="{1}" target="{2}_target" action="{3}"></form>',this.enctype,this.method,this.id,this.action),this.domNodeAttrs)),Object.dom.listenEvents(this,"submit",function(){return e.validateFields()}),t.init.call(this),this.createChild({id:n+"_target:View",onInited:function(){return e.frameElt=this},domNode:Object.dom.createComplexElement('<iframe src="about:blank" style="display:none;" name="'+this.id+'_target"></iframe>')},function(t,e){e&&Object.dom.listenEvents(e,"load",this.create_onload_handler())})},childrenAdapter:function(t){return[].concat(t)}}}}),Object.fire({uri:"axoid://define/View/SubmitButton",methods:function(t){return{init:function(){return this.domNode=Object.dom.createComplexElement('<input type="submit"/>',{value:String.localize(this.caption)}),t.init.call(this)}}}}),Object.fire({uri:"axoid://define/Field/FileContent",methods:function(t){return{childrenAdapter:function(e){var n;return t.childrenAdapter.call(n=this,[{id:this.id+"_input:View",onInited:function(){return n.valueElt=this},domNode:Object.dom.createComplexElement(String.format('<input type="file" class="{0}" name="{1}"/>',this.valueStyle,this.fileFieldName||this.id),{onchange:this.create_onchange_handler()})}].concat(e))},create_onchange_handler:function(){return function(t){return function(e){var n,i,r,o,s;for(s=e.target.files,r=0,o=s.length;o>r;r++)return n=s[r],i=new FileReader,i.onload=function(e){return t.prop("file",n),t.prop("value",e.target.result)},void i.readAsBinaryString(n)}}(this)}}}}),Object.fire({uri:"axoid://define/Field/FileUploader",properties:["attempt","submitSupport:SubmitSupport"],methods:function(t){return{init:function(){this.domNode||(this.domNode=Object.dom.createComplexElement(String.format('<form enctype="multipart/form-data", method="post" target="{0}_target" action="{1}"></form>',this.id,this.action),this.domNodeAttrs)),t.init.call(this),Object.dom.listenEvents(this.frameElt,"load",this.create_onload_handler())},childrenAdapter:function(e){var n,i;return n=this,i=this.id,t.childrenAdapter.call(this,[{id:i+"_input:View",onInited:function(){return n.valueElt=this},domNode:Object.dom.createComplexElement(String.format('<input type="file" class="{0}" name="{1}"/>',this.valueStyle,this.fileFieldName||i),{onchange:this.create_onchange_handler()})},{id:i+"_link:View",onInited:function(){return n.linkElt=this},domNodeTag:"a",domNodeAttrs:{target:"_blank"}},{onInited:function(){return n.frameElt=this},id:i+"_target:View",domNode:Object.dom.createComplexElement('<iframe src="about:blank" style="display:none;" name="'+this.id+'_target"></iframe>',{onload:this.create_onload_handler()})}].concat(e))},submit:function(){var t;return"function"==typeof(t=this.domNode).submit?t.submit():void 0},create_onchange_handler:function(){return function(){return!0}},error:function(e){return e.alertEntity=this.linkElt,t.error.call(this,e)},success:function(t){var e,n;return n=""+(t&&t.uri||""),n&&(e=this.linkElt.domNode,e.className="",e.innerHTML="link",this.setValue(e.href="//"+n)),this.prop("attempt",1+this.prop("attempt"))}}}})}.call(this);